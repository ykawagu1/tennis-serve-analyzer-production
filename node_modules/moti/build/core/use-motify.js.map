{"version":3,"file":"use-motify.js","sourceRoot":"","sources":["../../src/core/use-motify.ts"],"names":[],"mappings":"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","sourcesContent":["import type {\n  PresenceContext,\n  usePresence as useFramerPresence,\n} from 'framer-motion'\nimport { useEffect, useMemo } from 'react'\nimport type { TransformsStyle } from 'react-native'\nimport {\n  useAnimatedStyle,\n  useSharedValue,\n  withDecay,\n  withSpring,\n  withTiming,\n  withDelay,\n  withRepeat,\n  withSequence,\n  runOnJS,\n  ReduceMotion,\n} from 'react-native-reanimated'\nimport type {\n  WithDecayConfig,\n  WithSpringConfig,\n  WithTimingConfig,\n} from 'react-native-reanimated'\n\nimport { PackageName } from './constants/package-name'\nimport type {\n  InlineOnDidAnimate,\n  MotiProps,\n  MotiTransition,\n  SequenceItem,\n  Transforms,\n  TransitionConfig,\n  WithTransition,\n  SequenceItemObject,\n} from './types'\n\nconst debug = (...args: any[]) => {\n  'worklet'\n\n  // @ts-ignore\n  if (!global.shouldDebugMoti) {\n    return\n  }\n\n  if (args) {\n    // hi\n  }\n  console.log('[moti]', ...args)\n}\n\nconst isColor = (styleKey: string) => {\n  'worklet'\n  const keys = {\n    backgroundColor: true,\n    borderBottomColor: true,\n    borderLeftColor: true,\n    borderRightColor: true,\n    borderTopColor: true,\n    color: true,\n    shadowColor: true,\n    borderColor: true,\n    borderEndColor: true,\n    borderStartColor: true,\n  }\n\n  return Boolean(keys[styleKey])\n}\n\nconst isTransform = (styleKey: string) => {\n  'worklet'\n\n  const transforms: Record<keyof Transforms, true> = {\n    perspective: true,\n    rotate: true,\n    rotateX: true,\n    rotateY: true,\n    rotateZ: true,\n    scale: true,\n    scaleX: true,\n    scaleY: true,\n    translateX: true,\n    translateY: true,\n    skewX: true,\n    skewY: true,\n  }\n\n  return Boolean(transforms[styleKey])\n}\n\nfunction animationDelay<Animate>(\n  _key: string,\n  transition: MotiTransition<Animate> | undefined,\n  defaultDelay?: number\n) {\n  'worklet'\n  const key = _key as keyof Animate\n  let delayMs: TransitionConfig['delay'] = defaultDelay\n\n  if (transition?.[key]?.delay != null) {\n    delayMs = transition?.[key]?.delay\n  } else if (transition?.delay != null) {\n    delayMs = transition.delay\n  }\n\n  return {\n    delayMs,\n  }\n}\n\nconst withSpringConfigKeys: (keyof WithSpringConfig)[] = [\n  'stiffness',\n  'overshootClamping',\n  'restDisplacementThreshold',\n  'restSpeedThreshold',\n  'velocity',\n  'reduceMotion',\n  'mass',\n  'damping',\n  'duration',\n  'dampingRatio',\n]\n\nfunction animationConfig<Animate>(\n  styleProp: string,\n  transition: MotiTransition<Animate> | undefined\n) {\n  'worklet'\n\n  const key = styleProp as Extract<keyof Animate, string>\n  let repeatCount = 0\n  let repeatReverse = true\n\n  let animationType: Required<TransitionConfig>['type'] = 'spring'\n  if (isColor(key) || key === 'opacity') animationType = 'timing'\n\n  const styleSpecificTransition = transition?.[key as any]\n\n  // say that we're looking at `width`\n  // first, check if we have transition.width.type\n\n  if (styleSpecificTransition?.type) {\n    animationType = styleSpecificTransition.type\n  } else if (transition?.type) {\n    // otherwise, fallback to transition.type\n    animationType = transition.type\n  }\n\n  const loop = styleSpecificTransition?.loop ?? transition?.loop\n\n  if (loop != null) {\n    repeatCount = loop ? -1 : 0\n  }\n\n  if (styleSpecificTransition?.repeat != null) {\n    repeatCount = styleSpecificTransition?.repeat\n  } else if (transition?.repeat != null) {\n    repeatCount = transition.repeat\n  }\n\n  if (styleSpecificTransition?.repeatReverse != null) {\n    repeatReverse = styleSpecificTransition.repeatReverse\n  } else if (transition?.repeatReverse != null) {\n    repeatReverse = transition.repeatReverse\n  }\n\n  // debug({ loop, key, repeatCount, animationType })\n\n  let config = {}\n  let reduceMotion = ReduceMotion.System\n  // so sad, but fix it later :(\n  let animation = (...props: any): any => props\n\n  if (animationType === 'timing') {\n    const duration =\n      (transition?.[key] as WithTimingConfig | undefined)?.duration ??\n      (transition as WithTimingConfig | undefined)?.duration\n\n    const easing =\n      (transition?.[key] as WithTimingConfig | undefined)?.easing ??\n      (transition as WithTimingConfig | undefined)?.easing\n\n    const timingReduceMotion =\n      (transition?.[key] as WithTimingConfig | undefined)?.reduceMotion ??\n      (transition as WithTimingConfig | undefined)?.reduceMotion\n\n    if (easing) {\n      config['easing'] = easing\n    }\n    if (duration != null) {\n      config['duration'] = duration\n    }\n    if (reduceMotion) {\n      reduceMotion = timingReduceMotion ?? reduceMotion\n      config['reduceMotion'] = reduceMotion\n    }\n    animation = withTiming\n  } else if (animationType === 'spring') {\n    animation = withSpring\n    config = {} as WithSpringConfig\n    for (const configKey of withSpringConfigKeys) {\n      const styleSpecificConfig = transition?.[key]?.[configKey]\n      const transitionConfigForKey = transition?.[configKey]\n      if (configKey === 'reduceMotion') {\n        reduceMotion = transitionConfigForKey || styleSpecificConfig\n      }\n      if (styleSpecificConfig != null) {\n        config[configKey] = styleSpecificConfig\n      } else if (transitionConfigForKey != null) {\n        config[configKey] = transitionConfigForKey\n      }\n    }\n  } else if (animationType === 'decay') {\n    animation = withDecay\n    config = {}\n    const configKeys: (keyof WithDecayConfig)[] = [\n      'clamp',\n      'velocity',\n      'deceleration',\n      'velocityFactor',\n      'reduceMotion',\n      'velocityFactor',\n    ]\n    for (const configKey of configKeys) {\n      const styleSpecificConfig = transition?.[key]?.[configKey]\n      const transitionConfigForKey = transition?.[configKey]\n      if (configKey === 'reduceMotion') {\n        reduceMotion = transitionConfigForKey || styleSpecificConfig\n      }\n      if (styleSpecificConfig != null) {\n        config[configKey] = styleSpecificConfig\n      } else if (transitionConfigForKey != null) {\n        config[configKey] = transitionConfigForKey\n      }\n    }\n  } else if (animationType === 'no-animation') {\n    animation = (value) => value\n    config = {}\n    repeatCount = 0\n  }\n\n  return {\n    animation,\n    config,\n    reduceMotion,\n    repeatReverse,\n    repeatCount,\n    shouldRepeat: !!repeatCount,\n  }\n}\n\nconst getSequenceArray = (\n  sequenceKey: string,\n  sequenceArray: SequenceItem<any>[],\n  delayMs: number | undefined,\n  config: object,\n  animation: (...props: any) => any,\n  callback: (\n    completed: boolean | undefined,\n    value: any | undefined,\n    info: {\n      attemptedSequenceValue: any\n    }\n  ) => void\n) => {\n  'worklet'\n\n  const sequence: any[] = []\n\n  for (const step of sequenceArray) {\n    const shouldPush =\n      typeof step === 'object'\n        ? step && step?.value != null && step?.value !== false\n        : step != null && step !== false\n    let stepOnDidAnimate: SequenceItemObject<any>['onDidAnimate']\n    if (shouldPush) {\n      let stepDelay = delayMs\n      let stepValue = step\n      let stepReduceMotion = ReduceMotion.System\n      let stepConfig = Object.assign({}, config)\n      let stepAnimation = animation as\n        | typeof withTiming\n        | typeof withSpring\n        | typeof withDecay\n      if (typeof step === 'object') {\n        // not allowed in Reanimated: { delay, value, ...transition } = step\n        const stepTransition = Object.assign({}, step)\n\n        delete stepTransition.delay\n        delete stepTransition.value\n\n        const {\n          config: inlineStepConfig,\n          animation,\n          reduceMotion,\n        } = animationConfig(sequenceKey, stepTransition)\n\n        stepConfig = Object.assign({}, stepConfig, inlineStepConfig)\n        stepAnimation = animation\n        stepReduceMotion = reduceMotion\n\n        if (step.delay != null) {\n          stepDelay = step.delay\n        }\n        stepValue = step.value\n        stepOnDidAnimate = step.onDidAnimate\n      }\n\n      const sequenceValue = stepAnimation(\n        stepValue,\n        stepConfig as any,\n        (completed = false, maybeValue) => {\n          'worklet'\n          callback(completed, maybeValue, {\n            attemptedSequenceValue: stepValue,\n          })\n          if (stepOnDidAnimate) {\n            runOnJS(stepOnDidAnimate)(completed, maybeValue, {\n              attemptedSequenceItemValue: stepValue,\n              attemptedSequenceArray: maybeValue,\n            })\n          }\n        }\n      )\n      if (stepDelay != null) {\n        sequence.push(withDelay(stepDelay, sequenceValue, stepReduceMotion))\n      } else {\n        sequence.push(sequenceValue)\n      }\n    }\n  }\n\n  return sequence\n}\n\nexport function useMotify<Animate>({\n  animate: animateProp,\n  from: fromProp = false,\n  transition: transitionProp,\n  exitTransition: exitTransitionProp,\n  delay: defaultDelay,\n  state,\n  stylePriority = 'animate',\n  onDidAnimate,\n  exit: exitProp,\n  animateInitialState = false,\n  usePresenceValue,\n  presenceContext,\n}: MotiProps<Animate> & {\n  presenceContext?: Pick<\n    NonNullable<React.ContextType<typeof PresenceContext>>,\n    'custom' | 'initial'\n  > | null\n  usePresenceValue?: ReturnType<typeof useFramerPresence>\n}) {\n  const isMounted = useSharedValue(false)\n  const [isPresent, safeToUnmount] = usePresenceValue ?? []\n\n  const disableInitialAnimation =\n    presenceContext?.initial === false && !animateInitialState\n\n  const { custom, reanimatedSafeToUnmount, reanimatedOnDidAnimate } = useMemo(\n    () => ({\n      custom: () => {\n        'worklet'\n        return presenceContext?.custom\n      },\n      reanimatedSafeToUnmount: () => {\n        safeToUnmount?.()\n      },\n      reanimatedOnDidAnimate: (\n        ...args: Parameters<NonNullable<typeof onDidAnimate>>\n      ) => {\n        onDidAnimate?.(...args)\n      },\n    }),\n    [onDidAnimate, presenceContext, safeToUnmount]\n  )\n\n  const hasExitStyle = Boolean(\n    typeof exitProp === 'function' ||\n      (typeof exitProp === 'object' &&\n        exitProp &&\n        Object.keys(exitProp).length > 0)\n  )\n\n  const style = useAnimatedStyle(() => {\n    const final = {\n      // initializing here fixes reanimated object.__defineProperty bug(?)\n      transform: [] as TransformsStyle['transform'],\n    }\n    const variantStyle: Animate & WithTransition = state?.__state?.value || {}\n\n    let animateStyle: Animate\n\n    if (animateProp && 'value' in animateProp) {\n      animateStyle = (animateProp.value || {}) as Animate\n    } else {\n      animateStyle = (animateProp || {}) as Animate\n    }\n\n    debug('style', animateStyle)\n\n    const initialStyle = fromProp || {}\n    let exitStyle = exitProp || {}\n    if (typeof exitStyle === 'function') {\n      exitStyle = exitStyle(custom())\n    }\n\n    const isExiting = !isPresent && hasExitStyle\n\n    let mergedStyles: Animate = {} as Animate\n    if (stylePriority === 'state') {\n      mergedStyles = Object.assign({}, animateStyle, variantStyle)\n    } else {\n      mergedStyles = Object.assign({}, variantStyle, animateStyle)\n    }\n\n    if (\n      !isMounted.value &&\n      !disableInitialAnimation &&\n      Object.keys(initialStyle).length\n    ) {\n      mergedStyles = initialStyle as Animate\n    } else {\n      mergedStyles = Object.assign({}, initialStyle, mergedStyles)\n    }\n\n    if (isExiting && exitStyle) {\n      mergedStyles = Object.assign({}, exitStyle) as any\n    }\n\n    const exitingStyleProps: Record<string, boolean> = {}\n\n    const disabledExitStyles = new Set([\n      'position',\n      'zIndex',\n      'borderTopStyle',\n      'borderBottomStyle',\n      'borderLeftStyle',\n      'borderRightStyle',\n      'borderStyle',\n      'pointerEvents',\n      'outline',\n    ])\n    Object.keys(exitStyle || {}).forEach((key) => {\n      if (!disabledExitStyles.has(key)) {\n        exitingStyleProps[key] = true\n      }\n    })\n\n    // allow shared values as transitions\n    let transition: MotiTransition<Animate> | undefined\n    if (transitionProp && 'value' in transitionProp) {\n      transition = transitionProp.value\n    } else {\n      transition = transitionProp\n    }\n\n    // let the state prop drive transitions too\n    if (variantStyle.transition) {\n      transition = Object.assign({}, transition, variantStyle.transition)\n    }\n\n    if (isExiting && exitTransitionProp) {\n      let exitTransition: MotiTransition<Animate> | undefined\n      if (exitTransitionProp && 'value' in exitTransitionProp) {\n        exitTransition = exitTransitionProp.value\n      } else if (typeof exitTransitionProp == 'function') {\n        exitTransition = exitTransitionProp(custom())\n      } else {\n        exitTransition = exitTransitionProp\n      }\n\n      transition = Object.assign({}, transition, exitTransition)\n    }\n\n    // need to use forEach to work with Hermes...https://github.com/nandorojo/moti/issues/214#issuecomment-1399055535\n    Object.keys(mergedStyles as any).forEach((key) => {\n      let value = mergedStyles[key]\n\n      let inlineOnDidAnimate: InlineOnDidAnimate<any> | undefined\n\n      if (typeof value === 'object' && value && 'onDidAnimate' in value) {\n        inlineOnDidAnimate = value.onDidAnimate\n        value = value.value\n      }\n\n      const {\n        animation,\n        config,\n        reduceMotion,\n        shouldRepeat,\n        repeatCount,\n        repeatReverse,\n      } = animationConfig(key, transition)\n\n      const callback: (\n        completed: boolean | undefined,\n        value: any | undefined,\n        info?: {\n          attemptedSequenceValue?: any\n          transformKey?: string\n        }\n      ) => void = (completed = false, recentValue, info) => {\n        if (onDidAnimate) {\n          runOnJS(reanimatedOnDidAnimate as any)(\n            key as any,\n            completed,\n            recentValue,\n            {\n              attemptedValue: value,\n              attemptedSequenceItemValue: info?.attemptedSequenceValue,\n            }\n          )\n        }\n        if (inlineOnDidAnimate) {\n          runOnJS(inlineOnDidAnimate)(completed, recentValue, {\n            attemptedValue: value,\n          })\n        }\n        if (isExiting) {\n          exitingStyleProps[key] = false\n          const areStylesExiting =\n            Object.values(exitingStyleProps).some(Boolean)\n          // if this is true, then we've finished our exit animations\n          if (!areStylesExiting) {\n            runOnJS(reanimatedSafeToUnmount)()\n          }\n        }\n      }\n\n      let { delayMs } = animationDelay(key, transition, defaultDelay)\n\n      if (value == null || value === false) {\n        // skip missing values\n        // this is useful if you want to do {opacity: loading && 1}\n        // without this, those values will break I think\n        return\n      }\n\n      if (key === 'transform') {\n        if (!Array.isArray(value)) {\n          console.error(\n            `[${PackageName}]: Invalid transform value. Needs to be an array.`\n          )\n        } else {\n          value.forEach((transformObject) => {\n            final['transform'] = final['transform'] || []\n            const transformKey = Object.keys(transformObject)[0]\n            const transformValue = transformObject[transformKey]\n            const transform = {} as any\n\n            if (Array.isArray(transformValue)) {\n              // we have a sequence in this transform...\n              const sequence = getSequenceArray(\n                transformKey,\n                transformValue,\n                delayMs,\n                config,\n                animation,\n                callback\n              )\n\n              if (sequence.length) {\n                let finalValue = withSequence(sequence[0], ...sequence.slice(1))\n                if (shouldRepeat) {\n                  finalValue = withRepeat(\n                    finalValue,\n                    repeatCount,\n                    repeatReverse,\n                    callback,\n                    reduceMotion\n                  )\n                }\n                transform[transformKey] = finalValue\n              }\n            } else {\n              if (transition?.[transformKey]?.delay != null) {\n                delayMs = transition?.[transformKey]?.delay\n              }\n\n              let configKey = transformKey\n              if (\n                transition &&\n                'transform' in transition &&\n                !(configKey in transition)\n              ) {\n                configKey = 'transform'\n              }\n\n              const {\n                animation,\n                config,\n                shouldRepeat,\n                repeatCount,\n                repeatReverse,\n              } = animationConfig(configKey, transition)\n\n              let finalValue = animation(transformValue, config, callback)\n              if (shouldRepeat) {\n                finalValue = withRepeat(\n                  finalValue,\n                  repeatCount,\n                  repeatReverse,\n                  undefined,\n                  reduceMotion\n                )\n              }\n              if (delayMs != null) {\n                transform[transformKey] = withDelay(\n                  delayMs,\n                  finalValue,\n                  reduceMotion\n                )\n              } else {\n                transform[transformKey] = finalValue\n              }\n            }\n\n            if (\n              Object.keys(transform).length &&\n              Array.isArray(final['transform'])\n            ) {\n              final['transform'].push(transform)\n            }\n          })\n        }\n      } else if (Array.isArray(value)) {\n        // we have a sequence\n\n        const sequence = getSequenceArray(\n          key,\n          value,\n          delayMs,\n          config,\n          animation,\n          callback\n        )\n        let finalValue = withSequence(...sequence)\n        if (shouldRepeat) {\n          finalValue = withRepeat(\n            finalValue,\n            repeatCount,\n            repeatReverse,\n            undefined,\n            reduceMotion\n          )\n        }\n\n        if (isTransform(key)) {\n          // we have a sequence of transforms\n          final['transform'] = final['transform'] || []\n\n          if (sequence.length) {\n            const transform = {}\n\n            transform[key] = finalValue\n\n            // @ts-expect-error transform had the wrong type\n            final['transform'].push(transform)\n          }\n        } else {\n          // we have a normal sequence of items\n          // shadows not supported\n          if (sequence.length) {\n            final[key] = finalValue\n          }\n        }\n      } else if (isTransform(key)) {\n        final['transform'] = final['transform'] || []\n\n        if (transition?.[key]?.delay != null) {\n          delayMs = transition?.[key]?.delay\n        }\n\n        const transform = {}\n        let finalValue = animation(value, config, callback)\n        if (shouldRepeat) {\n          finalValue = withRepeat(\n            finalValue,\n            repeatCount,\n            repeatReverse,\n            undefined,\n            reduceMotion\n          )\n        }\n        if (delayMs != null) {\n          transform[key] = withDelay(delayMs, finalValue, reduceMotion)\n        } else {\n          transform[key] = finalValue\n        }\n\n        // @ts-expect-error transform had the wrong type\n        final['transform'].push(transform)\n      } else if (typeof value === 'object') {\n        // shadows\n        final[key] = {}\n        for (const innerStyleKey in value || {}) {\n          let finalValue = animation(value, config, callback)\n\n          if (shouldRepeat) {\n            finalValue = withRepeat(\n              finalValue,\n              repeatCount,\n              repeatReverse,\n              undefined,\n              reduceMotion\n            )\n          }\n\n          if (delayMs != null) {\n            final[key][innerStyleKey] = withDelay(\n              delayMs,\n              finalValue,\n              reduceMotion\n            )\n          } else {\n            final[key][innerStyleKey] = finalValue\n          }\n        }\n      } else {\n        let finalValue = animation(value, config, callback)\n        if (shouldRepeat) {\n          finalValue = withRepeat(\n            finalValue,\n            repeatCount,\n            repeatReverse,\n            undefined,\n            reduceMotion\n          )\n        }\n\n        if (delayMs != null && typeof delayMs === 'number') {\n          final[key] = withDelay(delayMs, finalValue, reduceMotion)\n        } else {\n          final[key] = finalValue\n        }\n      }\n    })\n\n    if (!final.transform?.length) {\n      delete final.transform\n    }\n\n    return final\n    // @ts-ignore complex union lol...\n  }, [\n    animateProp,\n    custom,\n    defaultDelay,\n    disableInitialAnimation,\n    exitProp,\n    exitTransitionProp,\n    fromProp,\n    hasExitStyle,\n    isMounted,\n    isPresent,\n    onDidAnimate,\n    reanimatedOnDidAnimate,\n    reanimatedSafeToUnmount,\n    state,\n    stylePriority,\n    transitionProp,\n  ])\n\n  useEffect(\n    function allowUnMountIfMissingExit() {\n      if (fromProp && isMounted.value === false) {\n        // put this here just to avoid having another useEffect\n        isMounted.value = true\n      }\n      if (!isPresent && !hasExitStyle) {\n        reanimatedSafeToUnmount()\n      }\n    },\n    [hasExitStyle, isPresent, reanimatedSafeToUnmount]\n  )\n\n  return {\n    style,\n  }\n}\n"]}